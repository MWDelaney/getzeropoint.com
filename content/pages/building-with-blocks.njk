---
title: Building with Blocks
description: Building a static website with reusable blocks, using ZeroPoint Starter
permalink: /building-with-blocks/
---

<h1>Building Reusable Blocks for <strong class="text-gradient">ZeroPoint Starter</strong></h1>
<p class="lead">Blocks, components, modules, widgets, partials, or whatever you call them are a common way designers and stakeholders expect to visualize websites.</p>
<p class="lead">ZeroPoint Starter includes <a href="https://github.com/MWDelaney/eleventy-plugin-reusable-components">eleventy-plugin-reusable-components</a> preconfigured (and commented out), which makes it easy to create and manage reusable HTML components.</p>
<p class="lead">This guide will show you how to install and configure the plugin and create your first reusable block. In the <a href="#advanced-usage">Advanced Usage</a> section, you'll learn how to integrate reusable blocks with a git-based CMS like <a href="https://decapcms.org/">Decap CMS</a> or <a href="https://sveltiacms.app">Sveltia CMS</a>.</p>

<h2>Advantages of Reusable Blocks</h2>
<ul>
  <li>üß± Build pages with pre-designed blocks</li>
  <li>üîÑ Easily update content across multiple pages</li>
  <li>üé® Maintain consistent design and layout</li>
  <li>‚öôÔ∏è Simplify collaboration between designers and developers</li>
</ul>

<h2>Get Started with Reusable Blocks</h2>
<ol class="steps">
  <li>
    <h3 id="install-the-plugin">Install the Plugin</h3>
    <p>Install the Eleventy Reusable Components plugin:</p>

{% highlight "bash" %}
  npm install --save-dev eleventy-plugin-reusable-components
{% endhighlight %}
    </li>
  <li>
    <h3 id="configure-the-plugin">Configure the Plugin</h3>
    <p>Uncomment the plugin's configuration in <code>src/config/plugins.js</code>:</p>

{% highlight "js" %}
import reusableComponents from "eleventy-plugin-reusable-components";

/**
  * ZeroPoint Reusable Components plugin
  * https://github.com/MWDelaney/eleventy-plugin-reusable-components
  */
async reusableComponents (eleventyConfig) {
  // Add plugin to eleventyConfig
  eleventyConfig.addPlugin(reusableComponents, {
    componentsDir: "src/assets/components/*.njk"
  });

  // Register CSS and JS component bundles
  eleventyConfig.addBundle("componentCss", {
    toFileDirectory: "assets/styles/",
  });

  eleventyConfig.addBundle("componentJs", {
    toFileDirectory: "assets/scripts/",
  });
}
{% endhighlight %}

  </li>
  <li>
    <h3 id="create-your-first-component">Create Your First Component</h3>
    <p>Create a new file in the <code>src/assets/components/</code> directory named <code>text.njk</code>:</p>
{% highlight "markdown" %}
---
# A simple text block

# Required fields
title: Text

# Default Values
textContent: "Lorem ipsum dolor sit amet, **consectetur adipiscing elit**, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."

# CMS fields
cms:
  - label: "Text Content"
    name: "textContent"
    widget: "markdown"
---

<section class="component component-{% raw %}{{ title | slugify }}{% endraw %}">
  {% raw %}{{- textContent | markdown | safe -}}{% endraw %}
</section>
{% endhighlight %}

      <p>This component has a single field, <code>textContent</code>. The default value is a block of placeholder text.</p>

      <h3 id="use-your-component">Use Your Component</h3>
      <p>Open any page on your site and add the following anywhere in the content:</p>
{% highlight "njk" %}
{% raw %}{{-
  {
    "type": "text",
    "textContent": "Hello, world!"
  } | renderComponent | safe
-}}{% endraw %}
{% endhighlight %}
    <p>See the <a href="https://github.com/MWDelaney/eleventy-plugin-reusable-components">Eleventy Reusable Components documentation</a> for complete usage instructions.</p>

    <h3 id="complete-example">A More Complicated Example</h3>
    <p>Here's a more complex example of a reusable component named <code>call-to-action.njk</code>:</p>

    <details>
      <summary><code>src/assets/components/call-to-action.njk</code></summary>
{% highlight "markdown" %}
---
# A call to action block with optional heading, text, image, and links

# Required fields
title: Call to Action

# Default Values
heading: "Join Our Newsletter"
textContent: "Our newsletter is sent out monthly. We respect your privacy and you can unsubscribe at any time."
image: "/assets/images/newsletter.png"
imageAlt: "Newsletter placeholder image"
links:
  - label: "Subscribe Now"
    url: "/subscribe/"
    style: "primary"
  - label: "Learn More"
    url: "/about/"
    style: "secondary"

# CMS fields
cms:
  - label: "Heading"
    name: "heading"
    widget: "string"
  - label: "Image"
    name: "image"
    widget: "image"
  - label: "Image Alt Text"
    name: "imageAlt"
    widget: "string"
  - label: "Text Content"
    name: "textContent"
    widget: "markdown"
  - label: "Links"
    name: "links"
    widget: "list"
    fields:
      - label: "Label"
        name: "label"
        widget: "string"
      - label: "URL"
        name: "url"
        widget: "string"
      - label: "Style"
        name: "style"
        widget: "select"
        options:
          - label: Primary
            value: primary
          - label: Secondary
            value: secondary
          - label: Tertiary
            value: tertiary
---

<section class="component component-{% raw %}{{ title | slugify }}{% endraw %}">
  {% raw %}{%- if heading -%}{% endraw %}
  <header>
    <h2>{% raw %}{{ heading }}{% endraw %}</h2>
  </header>
  {% raw %}{%- endif -%}{% endraw %}
  {% raw %}{%- if image -%}{% endraw %}
  <figure>
    <img src="{% raw %}{{ image }}{% endraw %}" alt="{% raw %}{{ imageAlt }}{% endraw %}">
  </figure>
  {% raw %}{%- endif -%}{% endraw %}
  {% raw %}{%- if textContent -%}{% endraw %}
  <article class="text-content">
    {% raw %}{{- textContent | markdown | safe -}}{% endraw %}
  </article>
  {% raw %}{%- endif -%}{% endraw %}
  {% raw %}{%- if links and links.length -%}{% endraw %}
  <footer>
    {% raw %}{% for link in links %}{% endraw %}
      <a href="{% raw %}{{ link.url }}{% endraw %}" class="button button-{% raw %}{{ link.style }}{% endraw %}">
        {% raw %}{{ link.label }}{% endraw %}
      </a>
    {% raw %}{% endfor %}{% endraw %}
  </footer>
</section>
{% endhighlight %}
    </details>

    <p>To use this component in a page, <a href="/adding-a-cms/">use the CMS</a> or add the following code to any page:</p>
    <details>
      <summary><code>content/pages/example-page.njk</code></summary>
{% highlight "njk" %}
{% raw %}{{-
  {
    "type": "call-to-action",
    "heading": "Join the 11ty Meetup!",
    "textContent": "The official 11ty Meetup is a great way to connect with other Eleventy users, share your projects, and learn new tips and tricks.",
    "image": "/assets/images/meetup.png",
    "imageAlt": "11ty Meetup logo",
    "links": [
      { "label": "Learn More", "url": "https://11tymeetup.dev", "style": "primary" },
      { "label": "Sign Up for Updates", "url": "https://11tymeetup.dev/#newsletter", "style": "secondary" }
    ]
  } | renderComponent | safe
-}}{% endraw %}
{% endhighlight %}
    </details>
    <p>This will render a call-to-action block with a heading, image, text content, and two buttons.</p>

</li>
</ul>

<h2 id="advanced-usage">Advanced Usage</h2>
<ol class="steps">
  <li>
    <h3 id="use-components-in-a-cms">Use Components in a CMS</h3>
    <p>Eleventy's <a href="https://www.11ty.dev/docs/data-cascade/">data cascade</a> makes it easy to integrate reusable components with a CMS like <a href="https://decapcms.org/">Decap CMS</a> or <a href="https://sveltiacms.app">Sveltia</a>.</p>

    <ol>
      <li>
        <h4 id="install-a-cms">Install a CMS</h4>
        <p>Follow the <a href="/adding-a-cms/">Adding a CMS</a> guide.</p>
      </li>

      <li>
        <h4 id="generate-editor-components">Generate Editor Components</h4>
        <p>To make your reusable components available in the CMS editor, create a new file named <code>content/admin/editor-components.js.jk</code> with the following content:</p>
        <details>
          <summary><code>content/admin/editor-components.js.njk</code></summary>
{% highlight "js" %}
---
eleventyExcludeFromCollections: true
permalink: "/admin/editor-components.js"
---

const componentData = [
{% for component in collections.components %}
  {
    name: "{{ component.data.title | slugify }}",
    label: "{{ component.data.title }}",
    fields: {{ component.data.cms | dump | safe }}
  },
{% endfor %}
];

componentData.forEach(data => {
  window.CMS.registerEditorComponent({
    id: `${data.name}-component`,
    label: data.label,
    fields: data.fields,
    pattern: new RegExp(
      String.raw`^\{\{\-?\s*\{(?=[^}]*\n?"type":\s*"${data.name}")([\s\S]*?)\}\s*\|\s*renderComponent\s*\|\s*safe\s*\-?\}\}$`
    ),

    fromBlock: function(match) {
      let props = {};
      try {
        props = JSON.parse('{' + match[1].trim() + '}');
      } catch (e) {
        console.error('Error parsing block JSON:', match[1], e);
        return {};
      }
      return props;
    },

    toBlock: function(obj) {
      // Serialize all field values (not just obj.props)
      var json = JSON.stringify(obj, null, 2);
      // Add a line break before the type as the first json object key
      json = json.replace(/^{/, '{\n"type": "' + data.name + '",');
      return '{\{- ' + json + ' | renderComponent | safe -}\}';
    },

    toPreview: function(obj) {
      return `<div style='border:1px solid #ccc;padding:1em;'><strong>${data.label}</strong><pre>${JSON.stringify(obj.props, null, 2)}</pre></div>`;
    }
  });
});
{% endhighlight %}
      </details>
      <p>This file generates a JavaScript array of your reusable components and registers them with the CMS.</p>
    </li>
    <li>
      <h4 id="configure-the-cms">Add the Script to the CMS Template</h4>
      <p>Add the following line to <code>content/admin/admin.yml</code>:</p>

      <details>
        <summary><code>content/admin/admin.yml</code></summary>
{% highlight "html" %}
<script src="/admin/editor-components.js"></script>
{% endhighlight %}
      </details>

      <p>You can now add your reusable components to any page managed by the CMS!</p>
    </li>
  </ol>
  </li>
  <li>
    <h3 id="bundle-styles">Bundle Styles with Components</h3>
    <p><strong>Coming soon!</strong></p>
  </li>
</ol>

<hr>

<ul class="buttons">
  <li>
    <a class="button button-launch" href="/">Back Home</a>
  </li>
    <li>
    <a class="button button-launch" href="/adding-a-cms/">Previous: Adding a CMS</a>
  </li>
</ul>
